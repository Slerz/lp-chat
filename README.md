# LP Chat - Chatbot с PHP Backend

## Деплой на Railway

### Подготовка к деплою

1. **Убедитесь, что у вас есть аккаунт на Railway**
   - Зарегистрируйтесь на [railway.app](https://railway.app)

2. **Настройте переменные окружения**
   - Создайте файл `.env` в корне проекта:
   ```
   OPENAI_API_KEY=your_openai_api_key_here
   PORT=3001
   ```

3. **Подготовьте PHP конфигурацию**
   - Убедитесь, что в `php/config/mail.php` настроен правильный email для получения заявок

### Деплой на Railway

1. **Подключите репозиторий к Railway**
   ```bash
   # Установите Railway CLI
   npm install -g @railway/cli
   
   # Войдите в аккаунт
   railway login
   
   # Создайте новый проект
   railway init
   
   # Подключите к существующему проекту (если уже создан)
   railway link
   ```

2. **Настройте переменные окружения в Railway**
   - Откройте проект в Railway Dashboard
   - Перейдите в раздел "Variables"
   - Добавьте переменную `OPENAI_API_KEY` с вашим ключом OpenAI

3. **Деплой**
   ```bash
   # Отправьте код на Railway
   railway up
   
   # Или через git
   git push railway main
   ```

### Структура проекта

- `openai-chat-backend.js` - Node.js сервер для чатбота
- `php/api/send_contact.php` - PHP endpoint для отправки заявок
- `js/app.js` - Frontend логика чатбота
- `js/feedback.js` - Frontend логика формы обратной связи

### Проверка работы

После деплоя:

1. **Проверьте чатбот** - откройте главную страницу и протестируйте диалог
2. **Проверьте отправку заявок** - заполните форму обратной связи
3. **Проверьте email** - убедитесь, что заявки приходят на указанный email

### Логи и отладка

- Логи доступны в Railway Dashboard в разделе "Deployments"
- Для отладки PHP ошибок проверьте логи Apache в контейнере

### Возможные проблемы

1. **Ошибка 500 при отправке заявок**
   - Проверьте настройки SMTP в `php/config/mail.php`
   - Убедитесь, что переменные окружения настроены

2. **Чатбот не отвечает**
   - Проверьте `OPENAI_API_KEY` в переменных окружения
   - Убедитесь, что Node.js сервер запущен

3. **PHP файлы не обрабатываются**
   - Проверьте конфигурацию Apache в Dockerfile
   - Убедитесь, что PHP модули установлены 